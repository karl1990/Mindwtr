# Mindwtr 0.6.15

## Highlights
- Added support for **local OpenAI-compatible AI endpoints** (for example Ollama/LM Studio/LocalAI/vLLM) via custom base URL.
- Major sync/data integrity hardening across core and cloud (write-lock behavior, deletion timestamp safety, attachment merge consistency, and stronger SQLite integrity checks).
- Mobile UX improvements across iOS and Android (iOS back navigation stabilization, Android checklist keyboard visibility, status bar/theme polish, and inbox/review flow improvements).
- MCP server upgrades for reliability and performance (transactional mutations, typed validation cleanup, FTS-based search, shared quick-add parsing, and expanded tests).
- Release/distribution improvements (official Homebrew cask automation, App Store/TestFlight workflow fixes, and Microsoft Store pipeline updates).

## Core / Sync / Cloud
- Added conservative handling for invalid `deletedAt` timestamps and fixed attachment winner URI/metadata merge behavior.
- Hardened cloud write lock queue continuation and improved write serialization safety.
- Added SQLite data-integrity validation at DB layer (task/project status validation + JSON field validation) and new sync-oriented composite indexes.
- Shared sync client helpers across desktop/mobile to reduce duplication and keep behavior aligned.
- Improved mobile sync config cache TTL and several merge/runtime correctness paths.

## Desktop / Mobile
- Stabilized iOS drawer/settings back navigation and gesture behavior.
- Fixed Android checklist title input visibility above keyboard and improved Android status bar theming.
- Improved mobile inbox processing flow and copilot context suggestions.
- Improved weekly review/calendar behavior for scheduled and due tasks.
- Added consistent async loading/error feedback in desktop list/projects workflows.
- Improved desktop accessibility/i18n coverage and grouped selector subscriptions for better maintainability.

## AI / MCP / Search
- Added local OpenAI-compatible endpoint support through custom base URL configuration.
- MCP server now uses FTS5 task search (with fallback), wraps task mutations in transactions, and validates typed inputs without unsafe casts.
- MCP service/tool registration test coverage was expanded.

## Packaging / Docs / CI
- Switched macOS Homebrew install docs to official `homebrew/cask` and added automatic cask bump workflow.
- Removed outdated macOS quarantine workaround note after signing pipeline changes.
- Expanded sync/testing wiki guidance and clarified Fluid Recurrence docs.
- Improved CI/workflow reliability across iOS/macOS/Windows publishing and metadata pipelines.

## Full Change List (since 0.6.14)
- ec2cfb24 chore(core): remove unused mergeEntities helper
- b23ca578 test(mcp): cover service and tool registration paths
- 06cef567 refactor(sync): share snapshot and cleanup helpers across clients
- a1c32ffd refactor(desktop): group selectors and improve a11y/i18n
- 934dcbf2 fix(desktop): add async loading states and error toasts
- bd2aef6d fix(core): enforce sqlite status/json integrity and add sync indexes
- dfac621f fix(cloud): continue write queue after rejected lock
- a94fe7a3 docs(wiki): expand sync and testing guidance
- f6559729 refactor(mcp): reuse core quick-add parser
- 62734897 docs(readme): remove completed f-droid roadmap item
- 26623289 perf(mobile-sync): increase config cache ttl to 30s
- 0cbd6d77 feat(mcp): use FTS5 for task search with LIKE fallback
- 6d79c904 fix(mcp): replace any casts with enum-validated inputs
- 6208c974 fix(mcp): wrap task mutations in db transactions
- f405dc2a fix(sync): honor attachment winner metadata and uri
- 84241f5a fix(sync): avoid Date.now fallback for invalid deletedAt
- 708c9bd6 fix(cloud): avoid write-lock continuation on rejected chain
- 161ecea2 fix(core): make openai provider tests bun-compatible
- c7872ccd feat(ai): support local OpenAI-compatible base URLs
- 66c5f97f fix(mobile): keep checklist input visible above keyboard on android
- ee342dc0 Merge pull request #154 from seclution/patch-1
- 5fee6fdc desktop(sync): treat missing WebDAV data.json (404) as empty remote state
- a86723fb docs: remove outdated macOS quarantine workaround
- 4fc5195d docs(readme): switch macOS Homebrew to official cask
- 00a46e99 docs: clarify fluid recurrence in readme and wiki
- 6ace16ce fix(core): make scheduled promotion test bun-compatible
- 492f58d2 ci(release): auto-bump official Homebrew cask
- 7f148731 fix(mobile): stabilize iOS back navigation headers
- 9ba11698 fix(mobile): theme android status bar background
- e6a6a4fe fix(mobile): apply task editor hidden fields
- e69a2e3e fix(mobile): show scheduled and due tasks in weekly review calendar
- 7bc400b4 fix(review): hide completed tasks in calendar and all filter
- 96709ade feat(mobile): add copilot context suggestions in inbox flow
- 5790cfa8 feat(mobile): improve inbox processing next-task flow
- 4e0c3a8c feat(core): promote scheduled tasks to next
- 46d40530 fix(mobile): use plain back icon for drawer stack screens
- 1b29f305 fix(mobile): remove settings back button circle on ios
- 83875b51 fix(mobile): use preventRemove for settings back flow
- 5ccf474e fix(mobile): stabilize ios settings back nav transitions
- fdbaf6cd fix(mobile): enable landscape and tablet manifest support
- ea728621 fix(release): trigger ios and mac appstore flows on tag release
- 15cb093b fix(core): relax revision metadata helper typing
- 57dd51df fix(desktop): sort task editor project and area dropdowns
- c5af69a0 fix(sync): sanitize invalid revision metadata before merge
- b296f32f fix(release): route review-blocked appstore uploads to testflight
- 3cc4dc57 fix(mobile): use app store updates and ios folder sync
- 7957fda3 docs: add macOS TestFlight beta link to install section
- 213f70db ci(appstore): separate ios/macos review checks and fix mac deliver
- 4d96601c ci(windows): normalize store description line wrapping
- cc529213 ci(macos): use fastlane for app store upload and review
- 32016d86 docs: add mac app store install option and badges
- b0bf8d42 feat(core): allow insecure webdav on private IP ranges
- 8cd31192 ci(workflows): dedupe asc key decode/api helper and clarify tag source
- 4c21b2b4 ci(ios): extract asc jwt and decode helpers
- 058a3852 ci(docker): deduplicate image workflows via reusable pipeline
- 5dc36134 ci(macos-appstore): replace deprecated altool upload
- 1cf6baee ci(workflows): cache rust artifacts for tauri store builds
- 88b615e6 ci(publish-repo): sign rpm repodata metadata
- 41e86822 ci(workflows): add concurrency guards and job timeouts
- be5f5a95 ci(workflows): pin bun and refresh action versions
- 46b8e1dd ci: enforce checks in ci workflow
- 88496194 ci(chocolatey): add package validation smoke test and metadata links
- 53255e21 ci(release): automate chocolatey packaging and publish
- 5d2ac5b1 docs(security): use private vulnerability reporting
- 6b69c4d6 docs(issues): refine templates and remove CI form
- 29c9c080 docs: add security policy
- b0d6dc43 docs(issues): add focused templates and issue chooser config
- 56287cf8 docs(readme): add community section and contributing links
- 6d07e982 fix(ci): use app-scoped appStoreVersions review-state lookup
- d3549f04 chore(ci): remove obsolete msstore metadata workflows
- 6e589b20 fix(core): advance custom monthly BYDAY start dates with interval
- d7d1964f fix(ci): send json body when committing msstore submission
- f499da75 fix(ci): handle missing pending submission in windows release
- afd7cb45 ci(windows): publish msstore package and metadata via single REST submission
- 58ad5ba2 ci(ios): disable review-state precheck
- 3c379e88 ci(ios): trigger app store release on tags with review submit
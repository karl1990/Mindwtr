# Mindwtr 0.6.16

## Highlights
- Security hardening for cloud sync attachments and auth handling (safer path decoding, symlink-safe writes, stricter bearer token validation, and improved route-level rate limit scoping).
- Sync correctness and race-condition fixes across desktop, mobile, and core (re-entrant sync serialization, listener lifecycle safety, deterministic project ordering, and safer timestamp parsing in merge).
- Mobile UX/performance upgrades (bulk action progress + restore flow, task list `getItemLayout`, task editor memoization, and stricter link attachment validation).
- GTD workflow and UI improvements (multi-step inbox project checks, waiting-person filters, richer markdown rendering in task descriptions, and additional accessibility polish).

## Security / Sync / Cloud
- Hardened cloud attachment path normalization to block multi-encoded traversal variants.
- Prevented TOCTOU write-window issues for cloud attachment writes using safer write flow and symlink checks.
- Added bearer token format validation before lookup and tightened `/v1/data` rate-limit scoping.
- Fixed desktop and mobile sync orchestration races and cleanup ordering for stability under rapid update events.
- Improved core merge behavior for `updatedAt` edge cases and ignored `purgedAt` in content conflict diffing.

## Mobile / Desktop
- Added mobile bulk delete progress UI and restore action.
- Improved mobile list performance with measured `getItemLayout` support and reduced large modal re-renders.
- Improved keyboard/safe-area/task-edit stability across multiple mobile screens.
- Added desktop quick-add error toast visibility and prompt confirmation validation for empty input.
- Added missing accessibility labels for project/section actions.

## Data Model / Refactor / Docs
- Centralized default project/area color constants and removed scattered hardcoded defaults.
- Shared duplicated reference-task clear logic in core store helpers.
- Expanded wiki coverage for cloud deployment, MCP usage, performance guidance, and release-note discoverability.

## Full Change List (since 0.6.15)
- 6e99c7b4 test(desktop): stabilize re-entrant sync listener assertion
- f9ea032a docs(wiki): link docker deployment from data and sync
- 49320922 docs(wiki): add mcp server link to home toc
- 2cf88946 refactor(theme): centralize default project color usage
- 6bc5a764 test(desktop): relax re-entrant sync call count assertion
- 72315495 refactor(core): share reference task clear logic
- 679d228e docs: expand cloud, mcp, and release note guides
- 1f6ac6b6 feat(mobile): add bulk action progress and restore option
- 945b1c11 refactor(ui): replace hardcoded default project color
- 3880b977 fix(sync): ignore purgedAt in conflict content diff
- 44df2b95 fix(mobile): validate link attachment URLs
- 48a85e2f fix(desktop): label add section action for a11y
- 69f80c7d fix(desktop): disable prompt confirm for empty input
- a8392e68 perf(mobile): hoist default context suggestions
- 31c47f17 perf(mobile): add getItemLayout for task list
- e01b5996 fix(mobile): avoid reusing aborted retry signals
- 75eb2404 perf(mobile): memoize task edit modal component
- 5ef0295a fix(desktop): show toast on quick-add project failure
- 45a0f3d1 fix(core): handle empty updatedAt safely in merge
- 5b87b8a9 fix(core): make project order allocation deterministic
- 5c3e7909 fix(mobile): guarantee sync listener cleanup
- e007be11 fix(desktop): serialize re-entrant sync runs
- 8a5eaee3 chore(release): bump cloud and mcp package versions
- 719740bb chore(version): align cloud and mcp package versions
- c9538b9c fix(cloud): scope data rate limits per method
- 464ebddf fix(cloud): validate bearer token format
- a4dba4ab fix(cloud): make attachment writes symlink-safe
- 0b9fba15 fix(cloud): harden attachment path decoding
- 436d5646 fix(mobile): harden foss ai and update behavior
- 108485b3 fix(mobile): improve iOS keyboard input visibility
- 6143d9ca fix(mobile): stabilize first-open task modal pager layout
- d2586a32 fix(mobile): prevent over-scroll on keyboard focus
- 02dcbbf9 fix(mobile): stabilize task edit pager after keyboard changes
- 0057df2a fix(mobile): keep quick add controls above android keyboard
- a906c739 ci(appstore): always push external testflight and auto-release
- 92682454 feat(ai): require consent before enabling desktop assistant
- e48cd1de fix(ci): export fastlane metadata dir in appstore workflows
- b24d0f45 feat(desktop): expand list details metadata badges
- 9b9e8cb9 fix(core): keep due unset for start-only recurrences
- 26957f9e fix(mobile): respect bottom safe area in daily review
- 519d183b chore(security): resolve bun and cargo audit findings
- 04a6a0aa fix(ios-review): require AI consent and clarify privacy policy
- bc7346e0 docs(readme): add iOS roadmap items and community PR call
- 49d8043b ci(linux): target ubuntu-20.04 and AppImageHub naming
- 23b93b5a fix: loose equality to null on all 6 optional timestamp checks in validateAppData (#161)
- e8f479ab fix(ci): harden workflows and resolve edge-case regressions
- c06b6265 fix(inbox): prefill next action for project conversion
- c9b1a5bc fix(ui): portal confirm modal out of virtualized rows
- 98688e24 fix(tests): satisfy Project type in inbox processor test
- d29687b7 ci(release): automate AUR source package updates
- a823b912 feat(inbox): add multi-step project check in processor
- 25d1d86e fix(sync): improve mac file sync path handling
- 22caeee4 docs(contributing): clarify external contribution workflow
- c56e854a feat(waiting): add person filter for waiting tasks
- b96d5a0a fix(tests): stabilize mobile ai-key loading and bun test globals
- 80012c93 feat(desktop): allow area selection in inbox processing
- 21cc3759 docs(readme): restore top App Store badge and link formatting
- 99192367 fix(desktop): resolve lint violations in review list and logging
- 0c97e01b fix(sync): handle iOS temp inbox paths and align mac update/docs
- a64c7c42 Merge pull request #151 from aaamaroq/feat/markdown-task-description
- 25638491 feat(desktop): disable image rendering in task descriptions
- c84c08f8 fix(mobile): make weekly review calendar step scrollable
- fa6bd324 feat(attachments): add smart link labels
- 6c9e25e5 fix(desktop): prevent clipped sidebar focus rings
- 380813f4 fix(TaskItem): render markdown outside toggle button and fix syntax error
- a93eeff0 Merge branch 'main' into feat/markdown-task-description
- 9d474cfb fix(mobile): allow custom AI model ids with suggestions
- bbaac721 fix(desktop): allow custom AI model ids in settings
- 919d25a6 fix(desktop): tune settings layout width and constraints
- 380a26a3 fix(ci): resolve homebrew cask from tap without api cache
- 6283f036 fix(ci): add manual homebrew bump and gate chocolatey publish
- 0cb454a1 fix(ci): retry homebrew cask bump on tap conflict
- 4138bba3 fix(update): prioritize install-source checks with github fallback
- bb50c95f docs(roadmap): add obsidian deep-link integration item
- 9890bbe4 docs(faq): clarify priority and estimated time toggle
- b58b42de feat: implement rich markdown rendering for task descriptions
